<!DOCTYPE HTML>
<html lang="en">
<head>
    <{wapheader}>
    <{script src="flexible.min.js" app="wap" pdir="js_mini"}>
    <link rel="stylesheet" href="images/style.css" />
</head>
<body>
	<div class="full_page">
	    <{wap_require file="block/header.html"}>
	    <div id="scroll_wrapper">
	        <div id="inner_scroll">
	            <{wap_main}>
	        </div>
	    </div>
	    <{wap_require file="block/footer.html"}>
    </div>
    <script type="text/javascript" src="images/iscroll.js"></script>
    <script type="text/javascript">
    	var myScroll;
    	// 定义全局变量，当页面中动态插入元素的时候可以调用
    	function loaded () {
        	myScroll = new IScroll('#scroll_wrapper', {
	            click: true,
	            scrollbars: true,
	            mouseWheel: true,
	            preventDefault: false,
	            interactiveScrollbars: true,
	            shrinkScrollbars: 'scale',
	            fadeScrollbars: true
	        });
	        //重写阻止默认事件规则,这样的话长按该span时就能弹出系统操作了!
			/*IScroll.utils.preventDefaultException = function (el, exceptions) {
				// inner_scroll 
				if( $(el).parents('#inner_scroll').length>0 ) {
			        return true;
			    }
			    for ( var i in exceptions ) {
			        if ( exceptions[i].test(el[i])) {
			            return true;
			        }
			    }
			    return false;
			};*/
	    }
	    function isPassive() {
	        var supportsPassiveOption = false;
	        try {
	            addEventListener("test", null, Object.defineProperty({}, 'passive', {
	                get: function () {
	                    supportsPassiveOption = true;
	                }
	            }));
	        } catch(e) {}
	        return supportsPassiveOption;
	    }
	    document.addEventListener('touchmove', function (e) { e.preventDefault(); }, isPassive() ? {
	        capture: false,
	        passive: false
	    } : false);
	    $(function(){
	        loaded();
	        setTimeout(function(){
	        	myScroll.refresh();
	        }, 1000)
	    })
    </script>
</body>
</html>
