<div class="activity_wrap" id="activity_wrap" data-starttime='<{$data.start_time}>' data-endtime='<{$data.end_time}>'>
  <a href="<{$data.ad_pic_link}>" target="_blank">
    <img src="<{$data.ad_pic|storager}>" alt="<{$data.ad_pic_txt}>" 
	style="<{if $data.ad_pic_width}>width:<{$data.ad_pic_width/75}>rem;<{/if}><{if $data.ad_pic_height}>height:<{$data.ad_pic_height/75}>rem;<{/if}>"/>
  </a>
  <span class="showox" id="timer">
  	<{if $data.end_time<$smarty.now}>
		活动已结束
  	<{/if}>
  </span>
</div>
<script>
	var starttime = $('.activity_wrap').data('starttime')*1000;
	var end_time = $('.activity_wrap').data('endtime')*1000;
	var currentTime = new Date().getTime();
	console.log(starttime<currentTime)
	if (currentTime<starttime) {
		leftTimer(starttime-currentTime,'活动开始剩余时间：')
	};
	if (currentTime>starttime && currentTime<end_time) {
		leftTimer(end_time-currentTime,'活动结束剩余时间：')
	};
	var timer = null;
	clearInterval(timer)
	timer = setInterval(function(){
		if (new Date().getTime()<starttime) {
			leftTimer(starttime-new Date().getTime(),'活动开始剩余时间：')
		};
		if (new Date().getTime()>starttime && currentTime<end_time) {
			leftTimer(end_time-new Date().getTime(),'活动结束剩余时间：')
		};
	}, 1000)
	function leftTimer(leftTime,msg){ 
		 var days = parseInt(leftTime / 1000 / 60 / 60 / 24 , 10); //计算剩余的天数 
		 var hours = parseInt(leftTime / 1000 / 60 / 60 % 24 , 10); //计算剩余的小时 
		 var minutes = parseInt(leftTime / 1000 / 60 % 60, 10);//计算剩余的分钟 
		 var seconds = parseInt(leftTime / 1000 % 60, 10);//计算剩余的秒数 
		 days = checkTime(days); 
		 hours = checkTime(hours); 
		 minutes = checkTime(minutes); 
		 seconds = checkTime(seconds);
		 document.getElementById("timer").innerHTML =msg+days+":" + hours+":" + minutes+":"+seconds;
		if ( days<=0&&  hours<=0 &&  minutes<=0 &&  seconds<=0) {
			location.reload();
		};
	} 
	function checkTime(i){ //将0-9的数字前面加上0，例1变为01 
		if(i<10) { 
		  	i = "0" + i; 
		} 
		return i; 
	}
</script>