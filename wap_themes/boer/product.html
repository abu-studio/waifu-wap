<!DOCTYPE HTML>
<html lang="en">
<head>
  	<{wapheader}>
  	<{script src="flexible.min.js" app="wap" pdir="js_mini"}>
  	<{css src="swiper.min.css" app="wap" pdir="css_mini"}>
  	<{script src="swiper.jquery.min.js" app="wap" pdir="js_mini"}>
	<link rel="stylesheet" href="images/style.css" />
</head>
<body>
<div class="full_page">
    <{wap_require file="block/header.html"}>
    <div id="scroll_wrapper">
        <div id="inner_scroll">
            <{wap_main}>
        </div>
    </div>
    <{wap_require file="block/footer.html"}>
    <div class="go_top"><i class="iconfont icon-up"></i></div>
</div>
<script type="text/javascript" src="images/iscroll.js"></script>
<script type="text/javascript">
    $('body').css('padding-top', $('header.head').height());
    $(window).on('scroll',function(){
        var st = $(window).scrollTop();
        if (st>200) {
            $('.go_top').show();
        }else{
            $('.go_top').hide();
        }
    })
    
    $('.go_top').on('touchend',function(){
        var st = $(window).scrollTop();
        clearInterval(timer)
        var timer = setInterval(function(){
            st-=100;
            if (st<=0) {
                st=0;
                clearInterval(timer)
            };
            $(window).scrollTop(st)
        }, 10)
        return false;
    })
    var myScroll;
    function loaded () {
        myScroll = new IScroll('#scroll_wrapper', {
            click: true,
            scrollbars: true,
            mouseWheel: true,
            interactiveScrollbars: true,
            shrinkScrollbars: 'scale',
            fadeScrollbars: true
        });
    }
    function isPassive() {
        var supportsPassiveOption = false;
        try {
            addEventListener("test", null, Object.defineProperty({}, 'passive', {
                get: function () {
                    supportsPassiveOption = true;
                }
            }));
        } catch(e) {}
        return supportsPassiveOption;
    }
    document.addEventListener('touchmove', function (e) { e.preventDefault(); }, isPassive() ? {
        capture: false,
        passive: false
    } : false);
    $(function(){
        loaded();
        setTimeout(function(){
            myScroll.refresh();
        }, 1000)
    })
</script>
</body>
</html>
